const themePresets={default:{name:"Â∏ïÊúµËè≤Ëéâ‰∏ù",default:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/pardofelis/win_bai.webp",darkmode:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/pardofelis/win_dark.webp",mobileday:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/pardofelis/mob_bai.webp",mobilenight:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/pardofelis/mob_dark.webp",nekoImg:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/favicon/pardofelis.webp"},elysia:{name:"Áà±ËéâÂ∏åÈõÖ",default:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/elysia/win_bai.webp",darkmode:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/elysia/win_dark.webp",mobileday:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/elysia/mob_bai.webp",mobilenight:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/background/elysia/mob_dark.webp",nekoImg:"https://gitee.com/Elvin-Apocalys/pic-bed/raw/master/favicon/elysia.webp"}};function initTheme(){applyTheme(localStorage.getItem("currentTheme")||"default")}function applyTheme(e){const n=themePresets[e];if(!n)return void console.error("‰∏ªÈ¢ò‰∏çÂ≠òÂú®:",e);console.log("Ê≠£Âú®Â∫îÁî®‰∏ªÈ¢ò:",e,n);const t=document.getElementById("web_bg");if(!t)return void console.error("Êâæ‰∏çÂà∞ #web_bg ÂÖÉÁ¥†");const o=n.default.includes("gradient"),a=o?n.default:`url(${n.default})`,r=o?n.darkmode:`url(${n.darkmode})`,i=o?n.mobileday:`url(${n.mobileday})`,c=o?n.mobilenight:`url(${n.mobilenight})`;t.querySelectorAll("style").forEach((e=>e.remove()));const d=document.createElement("style");d.innerHTML=`\n    /* PC ÁôΩÂ§© */\n    #web_bg {\n      background: ${a} !important;\n      background-attachment: local !important;\n      background-position: center !important;\n      background-size: cover !important;\n      background-repeat: no-repeat !important;\n    }\n\n    /* PC Â§úÈó¥ */\n    [data-theme="dark"] #web_bg {\n      background: ${r} !important;\n      background-attachment: local !important;\n      background-position: center !important;\n      background-size: cover !important;\n      background-repeat: no-repeat !important;\n    }\n\n    /* ÁßªÂä®Á´Ø ÁôΩÂ§© */\n    @media screen and (max-width: 768px) {\n      #web_bg {\n        background: ${i} !important;\n        background-attachment: local !important;\n        background-position: center !important;\n        background-size: cover !important;\n        background-repeat: no-repeat !important;\n      }\n    }\n\n    /* ÁßªÂä®Á´Ø Â§úÈó¥ */\n    @media screen and (max-width: 768px) {\n      [data-theme="dark"] #web_bg {\n        background: ${c} !important;\n        background-attachment: local !important;\n        background-position: center !important;\n        background-size: cover !important;\n        background-repeat: no-repeat !important;\n      }\n    }\n  `,t.appendChild(d),console.log("Ê†∑ÂºèÂ∑≤ÊõøÊç¢ÔºåËÉåÊôØÂ∫î‰∏∫:",a),localStorage.setItem("currentTheme",e);const m=new CustomEvent("themeChanged",{detail:{themeId:e,nekoImg:n.nekoImg}});document.dispatchEvent(m),console.log("Â∑≤Ëß¶Âèë‰∏ªÈ¢òÂàáÊç¢‰∫ã‰ª∂:",e);document.querySelectorAll(".theme-card").forEach((e=>{e.classList.remove("active");const n=e.querySelector(".theme-badge");n&&n.remove()}));const l=document.querySelector(`.theme-card[onclick*="${e}"]`);if(l){l.classList.add("active");const e=l.querySelector(".theme-info");if(e&&!e.querySelector(".theme-badge")){const n=document.createElement("span");n.className="theme-badge",n.textContent="ÂΩìÂâç‰∏ªÈ¢ò",e.appendChild(n)}}}function resetTheme(){localStorage.removeItem("currentTheme"),applyTheme("default")}var themeWinbox="";function createThemeWinbox(){let e=document.createElement("div");document.body.appendChild(e),themeWinbox=WinBox({id:"themeBox",title:"üé® ‰∏ªÈ¢òÂ•óË£ÖÂàáÊç¢",x:"center",y:"center",width:"700px",height:"75%",max:!1,background:"var(--theme-color)"}),themeWinResize(),window.addEventListener("resize",themeWinResize);const n=localStorage.getItem("currentTheme")||"default";let t="";for(let[e,o]of Object.entries(themePresets)){const a=e===n?"active":"";t+=`\n      <div class="theme-card ${a}" onclick="applyTheme('${e}')">\n        <div class="theme-preview" style="background: ${o.default.includes("gradient")?o.default:`url(${o.default})`}; background-size: cover; background-position: center;"></div>\n        <div class="theme-info">\n          <h4>${o.name}</h4>\n          ${a?'<span class="theme-badge">ÂΩìÂâç‰∏ªÈ¢ò</span>':""}\n        </div>\n      </div>\n    `}themeWinbox.body.innerHTML=`\n    <div class="theme-switcher-panel">\n      <style>\n        .theme-switcher-panel {\n          padding: 20px;\n          overflow-y: auto;\n          height: 100%;\n        }\n        \n        .theme-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n          gap: 20px;\n          margin: 20px 0;\n        }\n        \n        .theme-card {\n          background: var(--card-bg);\n          border-radius: 12px;\n          overflow: hidden;\n          cursor: pointer;\n          transition: all 0.3s;\n          border: 3px solid transparent;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n        }\n        \n        .theme-card:hover {\n          transform: translateY(-5px);\n          box-shadow: 0 8px 20px rgba(0,0,0,0.15);\n        }\n        \n        .theme-card.active {\n          border-color: var(--theme-color);\n          box-shadow: 0 0 20px var(--theme-color);\n        }\n        \n        .theme-preview {\n          width: 100%;\n          height: 180px;\n          position: relative;\n        }\n        \n        .theme-info {\n          padding: 15px;\n          text-align: center;\n        }\n        \n        .theme-info h4 {\n          margin: 0;\n          font-size: 1.1em;\n          color: var(--font-color);\n        }\n        \n        .theme-badge {\n          display: inline-block;\n          margin-top: 8px;\n          padding: 4px 12px;\n          background: var(--theme-color);\n          color: white;\n          border-radius: 20px;\n          font-size: 0.85em;\n        }\n        \n        .theme-actions {\n          text-align: center;\n          margin-top: 30px;\n          padding-top: 20px;\n          border-top: 2px dashed var(--border-color);\n        }\n        \n        .theme-btn {\n          display: inline-block;\n          padding: 12px 30px;\n          margin: 0 10px;\n          background: var(--theme-color);\n          color: white;\n          border: none;\n          border-radius: 25px;\n          cursor: pointer;\n          font-size: 1em;\n          transition: all 0.3s;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        \n        .theme-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 6px 16px rgba(0,0,0,0.2);\n        }\n        \n        .theme-btn.reset {\n          background: #ff6b6b;\n        }\n        \n        .theme-description {\n          background: var(--card-bg);\n          padding: 15px;\n          border-radius: 8px;\n          margin-bottom: 20px;\n          border-left: 4px solid var(--theme-color);\n        }\n        \n        .theme-description p {\n          margin: 5px 0;\n          color: var(--font-color);\n        }\n      </style>\n\n      <h3 style="color: var(--font-color); margin-bottom: 15px;">\n        <i class="fas fa-palette"></i> ÈÄâÊã©‰∏ªÈ¢òÂ•óË£Ö\n      </h3>\n      \n      <div class="theme-grid">\n        ${t}\n      </div>\n      \n      <div class="theme-actions">\n        <button class="theme-btn reset" onclick="resetTheme()">\n          <i class="fas fa-undo"></i> ÊÅ¢Â§çÈªòËÆ§‰∏ªÈ¢ò\n        </button>\n      </div>\n      \n      <div style="text-align: center; margin-top: 20px; color: var(--theme-color); font-weight: bold;">\n        ------ (ÔΩ°ÔΩ•‚àÄÔΩ•)ÔæâÔæû Âà∞Â∫ïÂï¶ ------\n      </div>\n    </div>\n  `}function themeWinResize(){try{var e=document.documentElement.clientWidth;e<=768?themeWinbox.resize(.95*e+"px","90%").move("center","center"):themeWinbox.resize("700px","75%").move("center","center")}catch(e){}}function toggleThemeWinbox(){document.querySelector("#themeBox")?themeWinbox.toggleClass("hide"):createThemeWinbox()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initTheme):initTheme(),document.addEventListener("pjax:complete",initTheme),window.toggleThemeWinbox=toggleThemeWinbox,window.applyTheme=applyTheme,window.resetTheme=resetTheme;